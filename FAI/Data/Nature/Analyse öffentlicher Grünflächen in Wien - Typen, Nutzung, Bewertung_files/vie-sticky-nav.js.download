!function(i){i.isScrollToFixed=function(o){return void 0!==i(o).data("ScrollToFixed")},i.ScrollToFixed=function(o,t){function e(){F.trigger("preUnfixed"),u(),F.trigger("unfixed"),$=-1,T=F.offset().top,_=F.offset().left,h.options.offsets&&(_+=F.offset().left-F.position().left),-1==S&&(S=_),m=F.css("position"),b=!0,-1!=h.options.bottom&&(F.trigger("preFixed"),f(),F.trigger("fixed"))}function n(){var i=h.options.limit;return i?"function"==typeof i?i():i:0}function r(){var i=h.options.limitTop;return i?"function"==typeof i?i():i:0}function s(){var i=h.options.minHeight;return i?"function"==typeof i?i():i:0}function l(){return"fixed"===m}function d(){return"absolute"===m}function c(){return!(l()||d())}function f(){l()||(w.css({display:F.css("display"),width:F.outerWidth(!0),height:F.outerHeight(!0),"float":F.css("float")}),F.css({width:F.width(),position:"fixed",top:-1==h.options.bottom?g():"",bottom:-1==h.options.bottom?"":h.options.bottom}),m="fixed")}function p(){w.css("wdith")||w.css({display:F.css("display"),width:F.outerWidth(!0),height:F.outerHeight(!0),"float":F.css("float")}),F.css({width:F.width(),position:"absolute",top:r(),left:_}),m="absolute"}function u(){c()||($=-1,w.css("display","none"),F.css({width:"",position:"",left:"",top:""}),m=null)}function a(i){i!=$&&(F.css("left",_-i),$=i)}function g(){return h.options.marginTop}function x(){if(i.isScrollToFixed(F)){var o=b;b||e();var t=i(window).scrollLeft(),r=i(window).scrollTop(),x=n(),m=s();m&&i(window).height()<m?c()&&o||(v(),F.trigger("preUnfixed"),u(),F.trigger("unfixed")):-1==h.options.bottom?x>0&&r>=x-g()?d()&&o||(v(),F.trigger("preAbsolute"),p(),F.trigger("unfixed")):r>=T-g()?(l()&&o||(v(),F.trigger("preFixed"),f(),$=-1,F.trigger("fixed")),a(t)):c()&&o||(v(),F.trigger("preUnfixed"),u(),F.trigger("unfixed")):x>0?r+i(window).height()-F.outerHeight(!0)>=x-g()?l()&&(v(),F.trigger("preUnfixed"),u(),F.trigger("unfixed")):(l()||(v(),F.trigger("preFixed"),f()),a(t),F.trigger("fixed")):a(t)}}function v(){var i=F.css("position");"absolute"==i?F.trigger("postAbsolute"):"fixed"==i?F.trigger("postFixed"):F.trigger("postUnfixed")}var h=this;h.$el=i(o),h.el=o,h.$el.data("ScrollToFixed",h);var m,b=!1,F=h.$el,T=0,_=0,S=-1,$=-1,w=null,A=function(){F.is(":visible")&&(b=!1,x())},U=function(){x()};h.init=function(){h.options=i.extend({},i.ScrollToFixed.defaultOptions,t),("iPad"!==navigator.platform&&"iPhone"!==navigator.platform&&"iPod"!==navigator.platform||navigator.userAgent.match(/OS 5_.*\ like Mac OS X/i))&&(h.$el.css("z-index",h.options.zIndex),w=i("<div />"),m=F.css("position"),c()&&h.$el.after(w),i(window).bind("resize.ScrollToFixed",A),i(window).bind("scroll.ScrollToFixed",U),h.options.preFixed&&F.bind("preFixed.ScrollToFixed",h.options.preFixed),h.options.postFixed&&F.bind("postFixed.ScrollToFixed",h.options.postFixed),h.options.preUnfixed&&F.bind("preUnfixed.ScrollToFixed",h.options.preUnfixed),h.options.postUnfixed&&F.bind("postUnfixed.ScrollToFixed",h.options.postUnfixed),h.options.preAbsolute&&F.bind("preAbsolute.ScrollToFixed",h.options.preAbsolute),h.options.postAbsolute&&F.bind("postAbsolute.ScrollToFixed",h.options.postAbsolute),h.options.fixed&&F.bind("fixed.ScrollToFixed",h.options.fixed),h.options.unfixed&&F.bind("unfixed.ScrollToFixed",h.options.unfixed),h.options.spacerClass&&w.addClass(h.options.spacerClass),F.bind("resize.ScrollToFixed",function(){w.height(F.height())}),F.bind("scroll.ScrollToFixed",function(){F.trigger("preUnfixed"),u(),F.trigger("unfixed"),x()}),F.bind("remove.ScrollToFixed",function(){F.trigger("preUnfixed"),u(),F.trigger("unfixed"),i(window).unbind("resize.ScrollToFixed",A),i(window).unbind("scroll.ScrollToFixed",U),F.unbind(".ScrollToFixed"),h.$el.removeData("ScrollToFixed")}),A())},h.init()},i.ScrollToFixed.defaultOptions={marginTop:0,limit:0,bottom:-1,zIndex:1e3},i.fn.scrollToFixed=function(o){return this.each(function(){new i.ScrollToFixed(this,o)})}}(jQuery),$(document).ready(function(){if($("#vie_resortnav")&&$("#vie_col1_content")&&$("#vie_col2_content")&&!navigator.userAgent.match(/Android|iPhone|iPad|iPod/i)&&$("#vie_main").outerHeight()>$("#vie_col1_content").outerHeight()){var i=/MSIE|Trident/i.test(navigator.userAgent);$("head").append('<style type="text/css">.js #vie_col1_content {height:auto !important;zoom:1;} </style>'),$("#vie_col1_content").scrollToFixed({marginTop:5,limitTop:function(){var i=0;"relative"!=$("#vie_main").css("position")&&(i+=$("#vie_main").offset().top);var o=i+$("#vie_main").outerHeight()-$("#vie_col1_content").outerHeight(!0);return o},limit:function(){var i=$("#vie_main").offset().top+$("#vie_main").outerHeight()-$("#vie_col1_content").outerHeight(!0);return i},minHeight:function(){var i=$("#vie_col1_content").height();return i},zIndex:999,fixed:function(){$("#vie_col1_content").css("margin-left","0")},preUnfixed:function(){$("#vie_col1_content").css("margin-left","")},preAbsolute:function(){$("#vie_col1_content").css("margin-left","0"),i&&$("#vie_main").css("position","static")},postAbsolute:function(){$("#vie_col1_content").css("margin-left",""),i&&$("#vie_main").css("position","relative")}})}}); 