$(function(){$.fn.wienaudio=function(settings){function isUserAgent(){var a=navigator.userAgent.toLowerCase(),t="",e=0;return-1!=a.indexOf("msie")?(t="IEBrowser",e=parseInt(a.split("msie")[1]),9!=e&&8!=e||(t="oldIEBrowser")):-1!=a.indexOf("android")?t="android":-1!=a.indexOf("iphone")?t="iphone":-1!=a.indexOf("ipad")&&(t="ipad"),t}function playAudio(){jwplayer(vContainer).play()}function stopAudio(){jwplayer(vContainer).stop()}function pimpControls(a,t){$("#"+a+"_controlbar span.jwplay span button").attr("class","hidetext"),$("#"+a+"_controlbar span.jwplay span button").attr("role","button"),$("#"+a+"_controlbar span.jwplay span button").attr("aria-live","polite"),$("#"+a+"_controlbar span.jwplay span button").text("Abspielen"),$("#"+a+"_controlbar span.jwplay span button").attr("title","Abspielen"),$("#"+a+"_controlbar span.jwmute span button").attr("class","hidetext"),$("#"+a+"_controlbar span.jwmute span button").attr("role","button"),$("#"+a+"_controlbar span.jwmute span button").attr("aria-live","polite"),$("#"+a+"_controlbar span.jwmute span button").text("Ton aus"),$("#"+a+"_controlbar span.jwmute span button").attr("title","Ton aus"),$("#"+a+"_view span.jwcontrols img.jwlogo").attr("alt","Logo"),navigator.userAgent.match(/(iPod|iPhone)/)&&$("#"+a+"_controlbar span.jwcc span button").hide(),jwplayer(a).onPlay(function(t){"PAUSED"==t.oldstate||"BUFFERING"==t.oldstate?($("#"+a+"_controlbar span.jwplay span button").text("Pause"),$("#"+a+"_controlbar span.jwplay span button").attr("title","Pause"),$("#"+a+"_controlbar span.jwplay span button").addClass("jwpause1"),$("#"+a+"_controlbar span.jwplay span button").removeClass("jwpause2")):($("#"+a+"_controlbar span.jwplay span button").text("Abspielen"),$("#"+a+"_controlbar span.jwplay span button").attr("title","Abspielen"),$("#"+a+"_controlbar span.jwplay span button").addClass("jwstop"))}),jwplayer(a).onPause(function(t){"PLAYING"==t.oldstate?($("#"+a+"_controlbar span.jwplay span button").text("Abspielen"),$("#"+a+"_controlbar span.jwplay span button").attr("title","Abspielen"),$("#"+a+"_controlbar span.jwplay span button").removeClass("jwpause1"),$("#"+a+"_controlbar span.jwplay span button").addClass("jwpause2")):($("#"+a+"_controlbar span.jwplay span button").text("Pause"),$("#"+a+"_controlbar span.jwplay span button").attr("title","Pause"))}),jwplayer(a).onIdle(function(t){"PLAYING"==t.oldstate&&($("#"+a+"_controlbar span.jwplay span button").text("Abspielen"),$("#"+a+"_controlbar span.jwplay span button").attr("title","Abspielen"),$("#"+a+"_controlbar span.jwplay span button").addClass("jwstop")),"PLAYING"==t.oldstate&&($("#"+a+"_controlbar span.jwplay span button").text("Abspielen"),$("#"+a+"_controlbar span.jwplay span button").attr("title","Abspielen"),$("#"+a+"_controlbar span.jwplay span button").addClass("jwstop2"))}),jwplayer(a).onMute(function(t){1==t.mute?($("#"+a+"_controlbar span.jwmute span button").text("Ton ein"),$("#"+a+"_controlbar span.jwmute span button").attr("title","Ton ein")):($("#"+a+"_controlbar span.jwmute span button").text("Ton aus"),$("#"+a+"_controlbar span.jwmute span button").attr("title","Ton aus"))}),"flash"==t?$("div.vAPOutContainer").attr("style","min-height: 0; margin-bottom: 10px;"):$("div.vAPOutContainer").attr("style","min-height: 0")}function replaceMp3Link(){$("li.vie-artikel-vorlesen .vie-subcl a").removeClass("apTogg1"),$("li.vie-artikel-vorlesen .vie-subcl a").attr("href",readerUrl+""+thisUrl)}function initMp3LinkOnly(){var a='<div id="audiolinkonly"><span class="audiolinkonlyinner"><a rel="nofollow" target="_blank" title="Download Link in neuem Fenster" href="'+readerUrl+thisUrl+'"><abbr>mp3</abbr> <span lang="en">Download</span></a></span></div>';$("#audioplayer").addClass("linkonly"),$("#audiopreview").html(a),$("#audioControl").hide()}function initIEAudioPlayer(){var a;a='<object type="application/x-shockwave-flash" data="'+c_URlPRefix+"audio/playerwh.swf?vrfile="+readerUrl,a=a+thisUrl+"&cache=false&setContentLength=true",a+='" width="275" height="32" id="voicereader">\n',a=a+'<param name="movie" value="'+c_URlPRefix+"audio/playerwh.swf?vrfile="+readerUrl,a=a+thisUrl+"&cache=false&setContentLength=true",a+='" />\n',a+='<param name="quality" value="high" />\n',a+='<param name="bgcolor" value="#EEEFEF" />\n',a+='<param name="swliveconnect" value="true" />\n',a+="<p>Vorleseservice</p>\n",a+="</object>\n",$("#audiopreview").html(a)}function initIEAudioControls(){var a;a='<div id="atoggle"><a rel="nofollow" href="#" class="apTogg2">Audiosteuerung erweitern</a>\n',a=a+'&middot; <a rel="nofollow" class="fuenf" target="_blank" title="Download Link in neuem Fenster" href="'+readerUrl,a+=thisUrl,a+='"><abbr>mp3</abbr> <span lang="en">Download</span></a></div>\n',a+='<ul id="ahelpcontrol" style="display:none;">\n',a+='<li><a id="ieStart" href="javascript:void(0)" class="eins"><span lang="en">Play</span></a></li>\n',a+='<li><a id="ieStop" href="javascript:void(0)" class="zwei">Stop</a></li>\n',a+='<li><a id="ieMute" href="javascript:void(0)" class="drei" >Ton aus</a></li>\n',a+='<li><a id="ieUnMute" href="javascript:void(0)" class="vier" >Ton ein</a></li>\n',a+='</ul><br clear="all" />\n',$("#audioControl").html(a)}function findeFlash(flash){if(document.all){if(document.all[flash])return document.all[flash];if(window.opera){var movie=eval(window.document+flash);if(movie.SetVariable)return movie}}else if(document.layers){if(document.embeds){var movie=document.embeds[flash];if(movie.SetVariable)return movie}}else if(document.getElementById){var movie=document.getElementById(flash);if(movie.SetVariable)return movie;var movies=movie.getElementsByTagName("embed");if(movies&&movies.length)return movie=movies[0],movie.SetVariable?movie:void 0}}var readerUrl="https://www.wien.gv.at/reader/reader.do?url=",readerUrlTest="http://reader.voicebusiness.net:8099/reader/reader.do?url=",thisUrl2=document.URL,thisTitel2=document.title,thisUrl=thisUrl2.replace(/(<.*?>)/gi,""),thisTitel=thisTitel2.replace(/(<.*?>)/gi,""),c_URlPRefix="/layout-a/wien.at/",c_vPrimary="html5",c_menImg="https://www.wien.gv.at/video/assets/images/menu.png",c_aboutText="wien.at/video",c_aboutLink="https://www.wien.gv.at/video",skinPath="/layout-a/wien.at/video/assets/skins/wienatdark/wienatdark.xml",c_vImage="/video/assets/images/testbild.png",oldIEBrowser=!1,vContainer=this.attr("id"),settings=$.extend({vId:1,vMId:"0",vCall:"default",vFile:readerUrl+""+thisUrl,vPrimary:c_vPrimary,vTitle:thisTitel},settings),stopaction=!1,jwCnt=0;$(document).on("click","li.vie-artikel-vorlesen",function(){var a=isUserAgent();"oldIEBrowser"!=a&&"iphone"!=a&&"ipad"!=a||(oldIEBrowser=!0),0==stopaction&&1!=oldIEBrowser&&($(this).hasClass("vie-artikelfunktionen-active")?(stopaction=!0,$("div#audioplayerouter").hide(),$(this).removeClass("vie-artikelfunktionen-active"),$("span#vac_apicon").hide(),$("#audioplayer").hide(),$("span#vac_apicon").removeClass("vac_apicon-active"),1==oldIEBrowser||jwplayer(vContainer).stop(),stopaction=!1):($(this).addClass("vie-artikelfunktionen-active"),$("span#vac_apicon").show(),$("div#audioplayerouter").show(),$("span#vac_apicon").addClass("vac_apicon-active"),stopaction=!0,0==jwCnt?(1==oldIEBrowser?($("#audioplayerouter").addClass("ieplayer"),$("span#vac_loading").hide(),$("#audioplayer").show(),initMp3LinkOnly(),stopaction=!1):(jwplayer(vContainer).setup({file:settings.vFile,primary:settings.vPrimary,title:settings.vTitle,width:"100%",height:"30",type:"video/mp4",controls:"true",abouttext:c_aboutText,aboutlink:c_aboutLink,skin:skinPath}),jwplayer(vContainer).onReady(function(){$("span#vac_loading").hide(),$("#audioplayer").show();var a=jwplayer(vContainer).getRenderingMode();"flash"==a||("html5"==a?pimpControls(vContainer,a):pimpControls(vContainer,a)),"default"==settings.vCall,jwplayer(vContainer).play(),$("#audioplayer_controlbar .jwplay button").focus(),stopaction=!1})),jwCnt++):($("span#vac_loading").hide(),$("#audioplayer").show(),$(this).addClass("vie-artikelfunktionen-active"),$("span#vac_apicon").addClass("vac_apicon-active"),$("span#vac_apicon").show(),$("div#audioplayerouter").show(),1==oldIEBrowser||(jwplayer(vContainer).play(),$("#audioplayer_controlbar .jwplay button").focus()),$(this).addClass("vie-artikelfunktionen-active"),stopaction=!1)))}),$(document).on("click","a.apTogg2",function(){$("ul#ahelpcontrol").toggleClass("active")}),$(document).on("click","a#ieStart",function(){var a=findeFlash("voicereader");a&&a.SetVariable("jsaction","play")}),$(document).on("click","a#ieStop",function(){var a=findeFlash("voicereader");a&&a.SetVariable("jsaction","pause")}),$(document).on("click","a#ieMute",function(){var a=findeFlash("voicereader");a&&a.SetVariable("jsaction","mute")}),$(document).on("click","a#ieUnMute",function(){var a=findeFlash("voicereader");a&&a.SetVariable("jsaction","unmute")})}}(jQuery));